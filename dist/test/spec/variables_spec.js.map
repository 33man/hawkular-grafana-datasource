{"version":3,"sources":["../../../spec/variables_spec.js"],"names":[],"mappings":";;AAAA;;AACA;;;;;;AAEA,SAAS,WAAT,EAAsB,YAAY;AAChC,MAAI,MAAM;AACR,iBAAa,EADL;AAER,eAAW;AAFH,GAAV;;AAKA,aAAW,YAAY;AACrB,QAAI,WAAJ,GAAkB;AACd,eAAS,iBAAS,MAAT,EAAiB,IAAjB,EAAuB;AAC9B,eAAO,MAAP;AACD;AAHa,KAAlB;AAKA,QAAI,SAAJ,GAAgB,yBAAc,IAAI,WAAlB,CAAhB;AACD,GAPD;;AASA,KAAG,gCAAH,EAAqC,UAAU,IAAV,EAAgB;AACnD,QAAI,WAAJ,CAAgB,OAAhB,GAA0B,UAAS,MAAT,EAAiB,IAAjB,EAAuB;AAC/C,aAAO,MAAP,EAAe,EAAf,CAAkB,KAAlB,CAAwB,MAAxB;AACA,aAAO,eAAP;AACD,KAHD;AAIA,QAAI,WAAW,IAAI,SAAJ,CAAc,OAAd,CAAsB,mBAAtB,EAA2C,EAA3C,CAAf;AACA,WAAO,QAAP,EAAiB,EAAjB,CAAoB,IAApB,CAAyB,KAAzB,CAA+B,CAAC,oBAAD,EAAuB,oBAAvB,CAA/B;AACA;AACD,GARD;;AAUA,KAAG,mCAAH,EAAwC,UAAU,IAAV,EAAgB;AACtD,QAAI,WAAJ,CAAgB,OAAhB,GAA0B,UAAS,MAAT,EAAiB,IAAjB,EAAuB;AAC/C,UAAI,WAAW,MAAf,EAAuB;AACrB,eAAO,eAAP;AACD;AACD,UAAI,WAAW,YAAf,EAA6B;AAC3B,eAAO,gBAAP;AACD;AACD,aAAO,MAAP;AACD,KARD;AASA,QAAI,WAAW,IAAI,SAAJ,CAAc,OAAd,CAAsB,8BAAtB,EAAsD,EAAtD,CAAf;AACA,WAAO,QAAP,EAAiB,EAAjB,CAAoB,IAApB,CAAyB,KAAzB,CAA+B,CAC7B,yBAD6B,EAE7B,yBAF6B,EAG7B,yBAH6B,EAI7B,yBAJ6B,EAK7B,uBAL6B,EAM7B,uBAN6B,CAA/B;AAQA;AACD,GApBD;AAqBD,CA9CD","file":"variables_spec.js","sourcesContent":["import {Variables} from \"../variables\";\nimport Q from \"q\";\n\ndescribe('Variables', function () {\n  let ctx = {\n    templateSrv: {},\n    variables: {}\n  };\n\n  beforeEach(function () {\n    ctx.templateSrv = {\n        replace: function(target, vars) {\n          return target;\n        }\n    };\n    ctx.variables = new Variables(ctx.templateSrv);\n  });\n\n  it('should resolve single variable', function (done) {\n    ctx.templateSrv.replace = function(target, vars) {\n      expect(target).to.equal('$app');\n      return \"{app_1,app_2}\";\n    };\n    let resolved = ctx.variables.resolve(\"$app/memory/usage\", {});\n    expect(resolved).to.deep.equal(['app_1/memory/usage', 'app_2/memory/usage']);\n    done();\n  });\n\n  it('should resolve multiple variables', function (done) {\n    ctx.templateSrv.replace = function(target, vars) {\n      if (target === '$app') {\n        return \"{app_1,app_2}\";\n      }\n      if (target === '$container') {\n        return \"{1234,5678,90}\";\n      }\n      return target;\n    };\n    let resolved = ctx.variables.resolve(\"$app/$container/memory/usage\", {});\n    expect(resolved).to.deep.equal([\n      'app_1/1234/memory/usage',\n      'app_2/1234/memory/usage',\n      'app_1/5678/memory/usage',\n      'app_2/5678/memory/usage',\n      'app_1/90/memory/usage',\n      'app_2/90/memory/usage'\n    ]);\n    done();\n  });\n});\n"]}